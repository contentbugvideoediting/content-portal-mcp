<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard â€” Content Bug</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../shared/_tokens.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            /* Neutral Luxury Palette */
            --bg-base: #0a0a0c;
            --bg-elevated: #111114;
            --bg-surface: #161619;
            --bg-hover: #1c1c20;
            --bg-active: #222226;

            --border-subtle: rgba(255,255,255,0.06);
            --border-default: rgba(255,255,255,0.1);
            --border-strong: rgba(255,255,255,0.15);

            --text-primary: #ffffff;
            --text-secondary: #a1a1aa;
            --text-muted: #71717a;
            --text-faint: #52525b;

            /* Accent Colors */
            --accent-blue: #3b82f6;
            --accent-blue-soft: rgba(59,130,246,0.15);
            --accent-green: #22c55e;
            --accent-green-soft: rgba(34,197,94,0.15);
            --accent-orange: #f59e0b;
            --accent-orange-soft: rgba(245,158,11,0.15);
            --accent-red: #ef4444;
            --accent-red-soft: rgba(239,68,68,0.15);
            --accent-purple: #a855f7;
            --accent-purple-soft: rgba(168,85,247,0.15);

            /* Role Colors */
            --role-owner: #a855f7;
            --role-admin: #ef4444;
            --role-editor: #3b82f6;
            --role-client: #22c55e;

            /* Health Colors */
            --health-healthy: #22c55e;
            --health-watch: #f59e0b;
            --health-risk: #ef4444;

            /* Plan Tier Colors */
            --tier-starter: #3b82f6;
            --tier-growth: #94a3b8;
            --tier-creator: #f59e0b;
            --tier-pro: #a855f7;

            /* Spacing */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 12px;
            --space-lg: 16px;
            --space-xl: 24px;
            --space-2xl: 32px;

            /* Radius */
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 14px;
            --radius-xl: 20px;

            /* Layout */
            --header-height: 56px;

            /* Revenue Colors */
            --revenue-positive: #22c55e;
            --revenue-negative: #ef4444;
            --revenue-neutral: #94a3b8;
        }

        html, body {
            height: 100%;
            background: var(--bg-base);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            color: var(--text-primary);
            overflow: hidden;
        }

        /* ==================== APP SHELL ==================== */
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* ==================== HEADER ==================== */
        .app-header {
            height: var(--header-height);
            background: var(--bg-elevated);
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--space-xl);
            flex-shrink: 0;
        }

        .header-brand {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .brand-logo {
            height: 32px;
            width: auto;
        }

        .header-nav {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .nav-btn {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            background: transparent;
            border: none;
            border-radius: var(--radius-md);
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
        }

        .nav-btn:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .nav-btn.active {
            background: var(--accent-red-soft);
            color: var(--accent-red);
        }

        .nav-btn svg {
            width: 18px;
            height: 18px;
        }

        /* Status Bubble */
        .status-bubble {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            font-size: 11px;
            color: var(--text-secondary);
        }

        .status-bubble-divider {
            width: 1px;
            height: 20px;
            background: var(--border-default);
            margin: 0 var(--space-xs);
        }

        .online-indicator {
            width: 8px;
            height: 8px;
            background: var(--accent-green);
            border-radius: 50%;
            position: relative;
        }

        .online-indicator::after {
            content: '';
            position: absolute;
            inset: -2px;
            background: var(--accent-green);
            border-radius: 50%;
            opacity: 0.4;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.4; }
            50% { transform: scale(1.5); opacity: 0; }
        }

        .online-counter-item {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .online-counter-item .count {
            font-weight: 700;
            color: var(--text-primary);
        }

        .user-section {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .user-profile:hover {
            background: var(--bg-hover);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--role-admin), #f87171);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
        }

        .user-avatar.owner { background: linear-gradient(135deg, var(--role-owner), #c084fc); }
        .user-avatar.admin { background: linear-gradient(135deg, var(--role-admin), #f87171); }

        .user-info {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-size: 13px;
            font-weight: 600;
        }

        .user-role {
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .user-role.owner { color: var(--role-owner); }
        .user-role.admin { color: var(--role-admin); }

        /* ==================== MAIN LAYOUT ==================== */
        .app-main {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-xl);
        }

        /* ==================== ADMIN HEADER ==================== */
        .admin-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-xl);
        }

        .admin-title {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .admin-title h1 {
            font-size: 24px;
            font-weight: 800;
        }

        .admin-badge {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-xs) var(--space-sm);
            background: var(--accent-red-soft);
            border-radius: var(--radius-sm);
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--accent-red);
        }

        .admin-badge svg {
            width: 12px;
            height: 12px;
        }

        .admin-actions {
            display: flex;
            gap: var(--space-sm);
        }

        .admin-action-btn {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-lg);
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-md);
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .admin-action-btn:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .admin-action-btn.primary {
            background: var(--accent-blue);
            border-color: transparent;
            color: white;
        }

        .admin-action-btn.primary:hover {
            background: #2563eb;
        }

        .admin-action-btn svg {
            width: 16px;
            height: 16px;
        }

        /* ==================== QUICK STATS BAR ==================== */
        .stats-bar {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: var(--space-md);
            margin-bottom: var(--space-xl);
        }

        .stat-card {
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            text-align: center;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: var(--space-xs);
        }

        .stat-value.good { color: var(--accent-green); }
        .stat-value.warning { color: var(--accent-orange); }
        .stat-value.bad { color: var(--accent-red); }
        .stat-value.danger { color: var(--accent-red); }

        .stat-label {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
        }

        .stat-change {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-xs);
            margin-top: var(--space-sm);
            font-size: 11px;
            font-weight: 600;
        }

        .stat-change.up { color: var(--accent-green); }
        .stat-change.down { color: var(--accent-red); }

        /* ==================== ADMIN COLUMNS (Kanban) ==================== */
        .admin-columns {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-lg);
            margin-bottom: var(--space-xl);
        }

        .admin-column {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            display: flex;
            flex-direction: column;
            max-height: 500px;
        }

        .admin-column.late { border-top: 3px solid var(--accent-red); }
        .admin-column.trials { border-top: 3px solid var(--accent-blue); }
        .admin-column.awaiting { border-top: 3px solid var(--accent-orange); }

        .column-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-lg);
            border-bottom: 1px solid var(--border-subtle);
        }

        .column-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: 14px;
            font-weight: 700;
        }

        .column-title svg {
            width: 18px;
            height: 18px;
        }

        .late .column-title { color: var(--accent-red); }
        .trials .column-title { color: var(--accent-blue); }
        .awaiting .column-title { color: var(--accent-orange); }

        .column-count {
            background: var(--bg-surface);
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-sm);
            font-size: 12px;
            font-weight: 700;
            color: var(--text-secondary);
        }

        .column-content {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-md);
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }

        /* Late Project Cards */
        .late-card-compact {
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-left: 3px solid var(--accent-red);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            transition: all 0.15s ease;
            cursor: pointer;
        }

        .late-card-compact:hover {
            background: var(--bg-hover);
            border-color: var(--border-default);
        }

        .late-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-sm);
        }

        .late-card-client {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .late-card-avatar {
            width: 28px;
            height: 28px;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 700;
        }

        .late-card-name {
            font-size: 13px;
            font-weight: 600;
        }

        .late-badge {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-xs) var(--space-sm);
            background: var(--accent-red-soft);
            border-radius: var(--radius-sm);
            font-size: 10px;
            font-weight: 700;
            color: var(--accent-red);
        }

        .late-card-project {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: var(--space-sm);
        }

        /* SLA Info for Admin View */
        .late-card-sla {
            display: flex;
            gap: var(--space-md);
            margin-bottom: var(--space-sm);
            padding: var(--space-sm);
            background: var(--bg-active);
            border-radius: var(--radius-sm);
            font-size: 10px;
        }

        .sla-item {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .sla-label {
            color: var(--text-faint);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .sla-value {
            font-weight: 600;
            color: var(--text-secondary);
        }

        .sla-value.editor-due {
            color: var(--accent-orange);
        }

        .sla-value.client-due {
            color: var(--accent-red);
        }

        .sla-status-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 9px;
            font-weight: 700;
            text-transform: uppercase;
        }

        .sla-status-badge.on-track {
            background: var(--accent-green-soft);
            color: var(--accent-green);
        }

        .sla-status-badge.watch {
            background: var(--accent-orange-soft);
            color: var(--accent-orange);
        }

        .sla-status-badge.at-risk {
            background: var(--accent-red-soft);
            color: var(--accent-red);
        }

        .late-card-actions {
            display: flex;
            gap: var(--space-sm);
        }

        .late-action {
            flex: 1;
            padding: var(--space-xs) var(--space-sm);
            background: var(--bg-active);
            border: none;
            border-radius: var(--radius-sm);
            font-size: 11px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .late-action:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .late-action.primary {
            background: var(--accent-red);
            color: white;
        }

        /* Free Trial Cards */
        .trial-card-compact {
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-left: 3px solid var(--accent-blue);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            transition: all 0.15s ease;
            cursor: pointer;
        }

        .trial-card-compact:hover {
            background: var(--bg-hover);
            border-color: var(--border-default);
        }

        .trial-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-sm);
        }

        .trial-card-user {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .trial-card-avatar {
            width: 28px;
            height: 28px;
            background: var(--accent-blue);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 700;
        }

        .trial-card-name {
            font-size: 13px;
            font-weight: 600;
        }

        .trial-stage {
            font-size: 10px;
            font-weight: 600;
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-sm);
        }

        .trial-stage.step1 { background: var(--accent-blue-soft); color: var(--accent-blue); }
        .trial-stage.step2 { background: var(--accent-orange-soft); color: var(--accent-orange); }
        .trial-stage.step3 { background: var(--accent-purple-soft); color: var(--accent-purple); }
        .trial-stage.ready { background: var(--accent-green-soft); color: var(--accent-green); }

        .trial-card-meta {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            font-size: 11px;
            color: var(--text-muted);
            margin-bottom: var(--space-sm);
        }

        .trial-card-actions {
            display: flex;
            gap: var(--space-sm);
        }

        .trial-action {
            flex: 1;
            padding: var(--space-xs) var(--space-sm);
            background: var(--bg-active);
            border: none;
            border-radius: var(--radius-sm);
            font-size: 11px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .trial-action:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .trial-action.primary {
            background: var(--accent-blue);
            color: white;
        }

        /* Awaiting Response Cards */
        .awaiting-card {
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-left: 3px solid var(--accent-orange);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            transition: all 0.15s ease;
            cursor: pointer;
        }

        .awaiting-card:hover {
            background: var(--bg-hover);
            border-color: var(--border-default);
        }

        .awaiting-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-sm);
        }

        .awaiting-client {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .awaiting-avatar {
            width: 28px;
            height: 28px;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 700;
        }

        .awaiting-name {
            font-size: 13px;
            font-weight: 600;
        }

        .wait-time {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-sm);
            font-size: 10px;
            font-weight: 700;
        }

        .wait-time.ok { background: var(--accent-green-soft); color: var(--accent-green); }
        .wait-time.warning { background: var(--accent-orange-soft); color: var(--accent-orange); }
        .wait-time.urgent {
            background: var(--accent-red-soft);
            color: var(--accent-red);
            animation: pulse-urgent 1.5s infinite;
        }

        @keyframes pulse-urgent {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .awaiting-message {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: var(--space-sm);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .awaiting-timestamp {
            font-size: 10px;
            color: var(--text-muted);
            margin-bottom: var(--space-sm);
        }

        .awaiting-actions {
            display: flex;
            gap: var(--space-sm);
        }

        .awaiting-action {
            flex: 1;
            padding: var(--space-xs) var(--space-sm);
            background: var(--bg-active);
            border: none;
            border-radius: var(--radius-sm);
            font-size: 11px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .awaiting-action:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .awaiting-action.primary {
            background: var(--accent-orange);
            color: white;
        }

        /* ==================== EDITOR MANAGEMENT ==================== */
        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-lg);
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
        }

        .editor-table {
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            overflow: hidden;
            margin-bottom: var(--space-xl);
        }

        .editor-table-header {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 1fr 1fr 120px;
            gap: var(--space-md);
            padding: var(--space-md) var(--space-lg);
            background: var(--bg-elevated);
            border-bottom: 1px solid var(--border-subtle);
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
        }

        .editor-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 1fr 1fr 120px;
            gap: var(--space-md);
            padding: var(--space-md) var(--space-lg);
            border-bottom: 1px solid var(--border-subtle);
            align-items: center;
            transition: all 0.15s ease;
        }

        .editor-row:last-child {
            border-bottom: none;
        }

        .editor-row:hover {
            background: var(--bg-hover);
        }

        .editor-info {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .editor-avatar {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--role-editor), #60a5fa);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
            position: relative;
        }

        .editor-avatar .status-dot {
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 10px;
            height: 10px;
            background: var(--accent-green);
            border: 2px solid var(--bg-surface);
            border-radius: 50%;
        }

        .editor-avatar .status-dot.offline {
            background: var(--text-muted);
        }

        .editor-details {
            display: flex;
            flex-direction: column;
        }

        .editor-name {
            font-size: 14px;
            font-weight: 600;
        }

        .editor-email {
            font-size: 11px;
            color: var(--text-muted);
        }

        .editor-stat {
            font-size: 14px;
            font-weight: 600;
        }

        .editor-stat.good { color: var(--accent-green); }
        .editor-stat.warning { color: var(--accent-orange); }
        .editor-stat.bad { color: var(--accent-red); }

        .health-badge {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-sm);
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
        }

        .health-badge.healthy { background: var(--accent-green-soft); color: var(--accent-green); }
        .health-badge.watch { background: var(--accent-orange-soft); color: var(--accent-orange); }
        .health-badge.risk { background: var(--accent-red-soft); color: var(--accent-red); }

        .health-badge .dot {
            width: 6px;
            height: 6px;
            background: currentColor;
            border-radius: 50%;
        }

        .editor-actions-cell {
            display: flex;
            gap: var(--space-sm);
        }

        .editor-action-btn {
            padding: var(--space-xs) var(--space-sm);
            background: var(--bg-active);
            border: none;
            border-radius: var(--radius-sm);
            font-size: 11px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .editor-action-btn:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        /* ==================== GRADING SYSTEM ==================== */
        .grading-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-lg);
        }

        .grading-card {
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
        }

        .grading-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-lg);
        }

        .grading-title {
            font-size: 16px;
            font-weight: 700;
        }

        .grading-score {
            font-size: 32px;
            font-weight: 800;
        }

        .grading-score.good { color: var(--accent-green); }
        .grading-score.warning { color: var(--accent-orange); }
        .grading-score.bad { color: var(--accent-red); }

        .grading-metrics {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }

        .grading-metric {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .metric-label {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .metric-bar-container {
            flex: 1;
            margin: 0 var(--space-lg);
            height: 6px;
            background: var(--bg-active);
            border-radius: 3px;
            overflow: hidden;
        }

        .metric-bar {
            height: 100%;
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .metric-bar.good { background: var(--accent-green); }
        .metric-bar.warning { background: var(--accent-orange); }
        .metric-bar.bad { background: var(--accent-red); }

        .metric-value {
            font-size: 13px;
            font-weight: 600;
            min-width: 40px;
            text-align: right;
        }

        /* Empty State */
        .empty-column {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: var(--space-xl);
            text-align: center;
            color: var(--text-muted);
        }

        .empty-column svg {
            width: 40px;
            height: 40px;
            margin-bottom: var(--space-md);
            opacity: 0.5;
        }

        .empty-column p {
            font-size: 13px;
        }

        /* ==================== REVENUE OVERVIEW ==================== */
        .revenue-overview {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: var(--space-xl);
            margin-bottom: var(--space-xl);
        }

        .revenue-metrics {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-lg);
        }

        .revenue-card {
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            position: relative;
            overflow: hidden;
        }

        .revenue-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-green), var(--accent-blue));
            opacity: 0.6;
        }

        .revenue-card.highlight::before {
            background: linear-gradient(90deg, var(--accent-green), #10b981);
            opacity: 1;
        }

        .revenue-card-label {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: var(--space-xs);
        }

        .revenue-card-value {
            font-size: 28px;
            font-weight: 800;
            color: var(--text-primary);
            line-height: 1.2;
        }

        .revenue-card-value.positive { color: var(--revenue-positive); }
        .revenue-card-value.negative { color: var(--revenue-negative); }

        .revenue-card-change {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            margin-top: var(--space-xs);
            font-size: 11px;
            font-weight: 500;
        }

        .revenue-card-change.up { color: var(--revenue-positive); }
        .revenue-card-change.down { color: var(--revenue-negative); }
        .revenue-card-change.neutral { color: var(--revenue-neutral); }

        .revenue-card-change svg {
            width: 12px;
            height: 12px;
        }

        .revenue-activity {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }

        .activity-card {
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .activity-icon.purchase { background: var(--accent-green-soft); }
        .activity-icon.trial { background: var(--accent-blue-soft); }

        .activity-info {
            flex: 1;
        }

        .activity-title {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .activity-subtitle {
            font-size: 11px;
            color: var(--text-muted);
        }

        .activity-count {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
        }

        /* ==================== TRANSACTIONS TABLE ==================== */
        .transactions-section {
            margin-bottom: var(--space-xl);
        }

        .transactions-table {
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            overflow: hidden;
        }

        .transactions-header {
            display: grid;
            grid-template-columns: 100px 1.5fr 1fr 1fr 100px 100px;
            gap: var(--space-md);
            padding: var(--space-md) var(--space-lg);
            background: var(--bg-active);
            font-size: 11px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .transaction-row {
            display: grid;
            grid-template-columns: 100px 1.5fr 1fr 1fr 100px 100px;
            gap: var(--space-md);
            padding: var(--space-md) var(--space-lg);
            border-bottom: 1px solid var(--border-subtle);
            font-size: 13px;
            align-items: center;
            transition: background 0.15s ease;
        }

        .transaction-row:last-child { border-bottom: none; }
        .transaction-row:hover { background: var(--bg-hover); }

        .transaction-date {
            color: var(--text-muted);
            font-size: 12px;
        }

        .transaction-client {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .transaction-avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--accent-blue-soft);
            color: var(--accent-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 700;
        }

        .transaction-name {
            font-weight: 500;
            color: var(--text-primary);
        }

        .transaction-type {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            border-radius: var(--radius-sm);
            font-size: 11px;
            font-weight: 600;
        }

        .transaction-type.purchase {
            background: var(--accent-green-soft);
            color: var(--accent-green);
        }

        .transaction-type.refund {
            background: var(--accent-red-soft);
            color: var(--accent-red);
        }

        .transaction-type.trial {
            background: var(--accent-blue-soft);
            color: var(--accent-blue);
        }

        .transaction-type.upgrade {
            background: var(--accent-purple-soft);
            color: var(--accent-purple);
        }

        .transaction-plan {
            color: var(--text-secondary);
        }

        .transaction-amount {
            font-weight: 600;
        }

        .transaction-amount.positive { color: var(--revenue-positive); }
        .transaction-amount.negative { color: var(--revenue-negative); }

        .transaction-status {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 11px;
            font-weight: 500;
        }

        .transaction-status .dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        .transaction-status.completed .dot { background: var(--accent-green); }
        .transaction-status.completed { color: var(--accent-green); }
        .transaction-status.pending .dot { background: var(--accent-orange); }
        .transaction-status.pending { color: var(--accent-orange); }
        .transaction-status.failed .dot { background: var(--accent-red); }
        .transaction-status.failed { color: var(--accent-red); }

        /* ==================== REVENUE PULSE ANIMATION ==================== */
        .revenue-pulse-container {
            position: fixed;
            top: 72px;
            right: 24px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
            pointer-events: none;
        }

        .revenue-pulse {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            background: var(--bg-elevated);
            border: 1px solid var(--border-default);
            border-radius: 50px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            font-size: 13px;
            font-weight: 500;
            color: var(--text-primary);
            opacity: 0;
            transform: translateX(100px);
            animation: revenuePulseIn 0.4s var(--ease-spring) forwards;
            pointer-events: auto;
        }

        .revenue-pulse.purchase {
            border-color: rgba(34, 197, 94, 0.3);
            background: linear-gradient(135deg, var(--bg-elevated) 0%, rgba(34, 197, 94, 0.08) 100%);
        }

        .revenue-pulse.trial {
            border-color: rgba(59, 130, 246, 0.3);
            background: linear-gradient(135deg, var(--bg-elevated) 0%, rgba(59, 130, 246, 0.08) 100%);
        }

        .revenue-pulse-icon {
            font-size: 16px;
        }

        .revenue-pulse.exiting {
            animation: revenuePulseOut 0.3s ease forwards;
        }

        @keyframes revenuePulseIn {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes revenuePulseOut {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(100px);
            }
        }

        @media (prefers-reduced-motion: reduce) {
            .revenue-pulse {
                animation: none;
                opacity: 1;
                transform: none;
            }
            .revenue-pulse.exiting {
                animation: none;
            }
        }

        /* ==================== TRIALS WATCHLIST ==================== */
        .trials-watchlist {
            margin-bottom: var(--space-xl);
        }

        .trials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: var(--space-md);
        }

        .trial-watch-card {
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-left: 3px solid var(--accent-blue);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            transition: all 0.2s ease;
        }

        .trial-watch-card:hover {
            background: var(--bg-hover);
            border-color: var(--border-default);
        }

        .trial-watch-card.inactive {
            border-left-color: var(--accent-orange);
        }

        .trial-watch-card.inactive::after {
            content: 'No activity';
            position: absolute;
            top: var(--space-sm);
            right: var(--space-sm);
            padding: 2px 6px;
            background: var(--accent-orange-soft);
            color: var(--accent-orange);
            font-size: 9px;
            font-weight: 700;
            text-transform: uppercase;
            border-radius: var(--radius-sm);
        }

        .trial-watch-card {
            position: relative;
        }

        .trial-watch-header {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
        }

        .trial-watch-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--accent-blue-soft);
            color: var(--accent-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
        }

        .trial-watch-info {
            flex: 1;
        }

        .trial-watch-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .trial-watch-email {
            font-size: 11px;
            color: var(--text-muted);
        }

        .trial-watch-meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
        }

        .trial-watch-tag {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            background: var(--bg-active);
            border-radius: var(--radius-sm);
            font-size: 11px;
            color: var(--text-secondary);
        }

        .trial-watch-tag svg {
            width: 12px;
            height: 12px;
        }

        .trial-watch-step {
            background: var(--accent-blue-soft);
            color: var(--accent-blue);
        }

        .trial-watch-actions {
            display: flex;
            gap: var(--space-sm);
        }

        .trial-watch-btn {
            flex: 1;
            padding: var(--space-sm);
            background: var(--bg-active);
            border: none;
            border-radius: var(--radius-sm);
            font-size: 11px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .trial-watch-btn:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .trial-watch-btn.primary {
            background: var(--accent-blue);
            color: white;
        }

        .trial-watch-btn.primary:hover {
            background: #2563eb;
        }

        /* ==================== NOTIFICATION BADGE ==================== */
        .notification-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            min-width: 18px;
            height: 18px;
            padding: 0 5px;
            background: var(--accent-red);
            border-radius: 9px;
            font-size: 10px;
            font-weight: 700;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: notificationPop 0.3s var(--ease-spring);
        }

        @keyframes notificationPop {
            from { transform: scale(0); }
            50% { transform: scale(1.2); }
            to { transform: scale(1); }
        }

        /* Chat icon with badge */
        .nav-btn {
            position: relative;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .admin-columns {
                grid-template-columns: 1fr;
            }
            .admin-column {
                max-height: 400px;
            }
            .stats-bar {
                grid-template-columns: repeat(3, 1fr);
            }
            .grading-section {
                grid-template-columns: 1fr;
            }
            .revenue-overview {
                grid-template-columns: 1fr;
            }
            .revenue-metrics {
                grid-template-columns: repeat(2, 1fr);
            }
            .transactions-header,
            .transaction-row {
                grid-template-columns: 80px 1fr 1fr 1fr 80px 80px;
            }
        }

        @media (max-width: 768px) {
            .app-header {
                padding: 0 var(--space-md);
            }
            .header-nav {
                display: none;
            }
            .stats-bar {
                grid-template-columns: repeat(2, 1fr);
            }
            .editor-table {
                overflow-x: auto;
            }
            .editor-table-header,
            .editor-row {
                min-width: 900px;
            }
            .revenue-metrics {
                grid-template-columns: 1fr 1fr;
            }
            .transactions-table {
                overflow-x: auto;
            }
            .transactions-header,
            .transaction-row {
                min-width: 600px;
            }
            .trials-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container" id="appContainer" data-role="admin">
        <!-- Header -->
        <header class="app-header">
            <div class="header-brand">
                <img src="https://storage.googleapis.com/msgsndr/mCNHhjy593eUueqfuqyU/media/6930abb0e0f092608f6ec5e6.png" alt="Content Bug" class="brand-logo">
            </div>

            <nav class="header-nav">
                <a href="https://app.contentbug.io/dashboard" class="nav-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
                    Dashboard
                </a>
                <a href="https://app.contentbug.io/chat" class="nav-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                    Chat
                </a>
                <a href="https://app.contentbug.io/team" class="nav-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                    Team
                </a>
                <a href="https://app.contentbug.io/admin" class="nav-btn active">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                    Admin
                </a>
            </nav>

            <!-- Status Bubble -->
            <div class="status-bubble">
                <div class="online-counter-item">
                    <div class="online-indicator"></div>
                    <span class="count">8</span> Editors
                </div>
                <div class="status-bubble-divider"></div>
                <div class="online-counter-item">
                    <span class="count">12</span> Clients
                </div>
                <div class="status-bubble-divider"></div>
                <div class="online-counter-item">
                    <span class="count">20</span> Total
                </div>
            </div>

            <div class="user-section">
                <div class="user-profile" id="userProfile">
                    <div class="user-avatar admin" id="userAvatar">SC</div>
                    <div class="user-info">
                        <span class="user-name" id="userName">Sean Conley</span>
                        <span class="user-role admin" id="userRole">Admin</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="app-main">
            <!-- Admin Header -->
            <div class="admin-header">
                <div class="admin-title">
                    <h1>Admin Dashboard</h1>
                    <div class="admin-badge">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                        Admin Access
                    </div>
                </div>
                <div class="admin-actions">
                    <button class="admin-action-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                        Export Report
                    </button>
                    <button class="admin-action-btn primary">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="8.5" cy="7" r="4"/><line x1="20" y1="8" x2="20" y2="14"/><line x1="23" y1="11" x2="17" y2="11"/></svg>
                        Invite Editor
                    </button>
                </div>
            </div>

            <!-- Quick Stats Bar - Operational Signals -->
            <div class="stats-bar">
                <div class="stat-card">
                    <div class="stat-value" id="statActiveProjects">156</div>
                    <div class="stat-label">Active Projects</div>
                    <div class="stat-change up">+12 this week</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value warning" id="statLateProjects">3</div>
                    <div class="stat-label">Late Projects</div>
                    <div class="stat-change down">+1</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="statDueToday">7</div>
                    <div class="stat-label">Due Today</div>
                    <div class="stat-change">needs attention</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value warning" id="statUnassigned">2</div>
                    <div class="stat-label">Unassigned</div>
                    <div class="stat-change down">needs editor</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value danger" id="statAtRisk">4</div>
                    <div class="stat-label">At-Risk</div>
                    <div class="stat-change">SLA breach risk</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value good">94%</div>
                    <div class="stat-label">On-Time Rate</div>
                    <div class="stat-change up">+2.4%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">1.6d</div>
                    <div class="stat-label">Avg Turnaround</div>
                    <div class="stat-change up">-0.2d</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value good">9.1</div>
                    <div class="stat-label">Avg Rating</div>
                    <div class="stat-change up">+0.3</div>
                </div>
            </div>

            <!-- Revenue Overview Section -->
            <div class="section-header">
                <h2 class="section-title">Revenue Overview</h2>
                <div class="section-actions">
                    <span class="section-period">December 2024</span>
                </div>
            </div>

            <div class="revenue-overview">
                <div class="revenue-metrics">
                    <div class="revenue-card highlight">
                        <div class="revenue-card-label">Total Revenue</div>
                        <div class="revenue-card-value" id="revenueTotal">$47,850</div>
                        <div class="revenue-card-change up">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/></svg>
                            +12.4% vs last month
                        </div>
                    </div>
                    <div class="revenue-card">
                        <div class="revenue-card-label">Total Refunds</div>
                        <div class="revenue-card-value negative" id="revenueRefunds">-$1,240</div>
                        <div class="revenue-card-change neutral">2 refunds this month</div>
                    </div>
                    <div class="revenue-card">
                        <div class="revenue-card-label">Net Revenue</div>
                        <div class="revenue-card-value positive" id="revenueNet">$46,610</div>
                        <div class="revenue-card-change up">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/></svg>
                            +11.8% vs last month
                        </div>
                    </div>
                    <div class="revenue-card">
                        <div class="revenue-card-label">Active Subscriptions</div>
                        <div class="revenue-card-value" id="revenueSubscriptions">156</div>
                        <div class="revenue-card-change up">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/></svg>
                            +8 this month
                        </div>
                    </div>
                </div>

                <div class="revenue-activity">
                    <div class="activity-card">
                        <div class="activity-icon purchase">ðŸ’°</div>
                        <div class="activity-info">
                            <div class="activity-title">New Purchases</div>
                            <div class="activity-subtitle">Last 24 hours</div>
                        </div>
                        <div class="activity-count" id="activityPurchases">3</div>
                    </div>
                    <div class="activity-card">
                        <div class="activity-icon trial">âœ¨</div>
                        <div class="activity-info">
                            <div class="activity-title">New Free Trials</div>
                            <div class="activity-subtitle">Last 24 hours</div>
                        </div>
                        <div class="activity-count" id="activityTrials">7</div>
                    </div>
                    <div class="activity-card">
                        <div class="activity-icon purchase">ðŸ“…</div>
                        <div class="activity-info">
                            <div class="activity-title">Upcoming Payments</div>
                            <div class="activity-subtitle">Payment plans due</div>
                        </div>
                        <div class="activity-count" id="activityUpcoming">12</div>
                    </div>
                </div>
            </div>

            <!-- Trials Watchlist -->
            <div class="section-header">
                <h2 class="section-title">Trials in Progress</h2>
                <div class="section-actions">
                    <span class="section-count" id="trialsCount">4 active trials</span>
                </div>
            </div>

            <div class="trials-watchlist">
                <div class="trials-grid" id="trialsGrid">
                    <div class="trial-watch-card">
                        <div class="trial-watch-header">
                            <div class="trial-watch-avatar">JD</div>
                            <div class="trial-watch-info">
                                <div class="trial-watch-name">John Davis</div>
                                <div class="trial-watch-email">john@example.com</div>
                            </div>
                        </div>
                        <div class="trial-watch-meta">
                            <span class="trial-watch-tag">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                                Started 2h ago
                            </span>
                            <span class="trial-watch-tag trial-watch-step">Step 3</span>
                            <span class="trial-watch-tag">1 project</span>
                        </div>
                        <div class="trial-watch-actions">
                            <button class="trial-watch-btn primary">Message</button>
                            <button class="trial-watch-btn">View</button>
                        </div>
                    </div>

                    <div class="trial-watch-card inactive">
                        <div class="trial-watch-header">
                            <div class="trial-watch-avatar">SL</div>
                            <div class="trial-watch-info">
                                <div class="trial-watch-name">Sarah Lee</div>
                                <div class="trial-watch-email">sarah@startup.io</div>
                            </div>
                        </div>
                        <div class="trial-watch-meta">
                            <span class="trial-watch-tag">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                                Started 1d ago
                            </span>
                            <span class="trial-watch-tag trial-watch-step">Step 2</span>
                            <span class="trial-watch-tag">0 projects</span>
                        </div>
                        <div class="trial-watch-actions">
                            <button class="trial-watch-btn primary">Message</button>
                            <button class="trial-watch-btn">View</button>
                        </div>
                    </div>

                    <div class="trial-watch-card">
                        <div class="trial-watch-header">
                            <div class="trial-watch-avatar">MK</div>
                            <div class="trial-watch-info">
                                <div class="trial-watch-name">Mike Kim</div>
                                <div class="trial-watch-email">mike@creator.co</div>
                            </div>
                        </div>
                        <div class="trial-watch-meta">
                            <span class="trial-watch-tag">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                                Started 4h ago
                            </span>
                            <span class="trial-watch-tag trial-watch-step">Complete</span>
                            <span class="trial-watch-tag">2 projects</span>
                        </div>
                        <div class="trial-watch-actions">
                            <button class="trial-watch-btn primary">Message</button>
                            <button class="trial-watch-btn">View</button>
                        </div>
                    </div>

                    <div class="trial-watch-card">
                        <div class="trial-watch-header">
                            <div class="trial-watch-avatar">RJ</div>
                            <div class="trial-watch-info">
                                <div class="trial-watch-name">Rachel Johnson</div>
                                <div class="trial-watch-email">rachel@youtube.com</div>
                            </div>
                        </div>
                        <div class="trial-watch-meta">
                            <span class="trial-watch-tag">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                                Started 30m ago
                            </span>
                            <span class="trial-watch-tag trial-watch-step">Step 1</span>
                            <span class="trial-watch-tag">0 projects</span>
                        </div>
                        <div class="trial-watch-actions">
                            <button class="trial-watch-btn primary">Message</button>
                            <button class="trial-watch-btn">View</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Transactions -->
            <div class="section-header">
                <h2 class="section-title">Recent Transactions</h2>
            </div>

            <div class="transactions-section">
                <div class="transactions-table">
                    <div class="transactions-header">
                        <span>Date</span>
                        <span>Client</span>
                        <span>Event</span>
                        <span>Plan</span>
                        <span>Amount</span>
                        <span>Status</span>
                    </div>
                    <div class="transaction-row">
                        <div class="transaction-date">Dec 23</div>
                        <div class="transaction-client">
                            <div class="transaction-avatar" style="background: var(--accent-green-soft); color: var(--accent-green);">AM</div>
                            <span class="transaction-name">Alex Martinez</span>
                        </div>
                        <span class="transaction-type purchase">Purchase</span>
                        <span class="transaction-plan">Pro Plan</span>
                        <span class="transaction-amount positive">+$497</span>
                        <span class="transaction-status completed"><span class="dot"></span> Completed</span>
                    </div>
                    <div class="transaction-row">
                        <div class="transaction-date">Dec 23</div>
                        <div class="transaction-client">
                            <div class="transaction-avatar">JD</div>
                            <span class="transaction-name">John Davis</span>
                        </div>
                        <span class="transaction-type trial">Trial Start</span>
                        <span class="transaction-plan">Free Trial</span>
                        <span class="transaction-amount">$0</span>
                        <span class="transaction-status completed"><span class="dot"></span> Active</span>
                    </div>
                    <div class="transaction-row">
                        <div class="transaction-date">Dec 22</div>
                        <div class="transaction-client">
                            <div class="transaction-avatar" style="background: var(--accent-purple-soft); color: var(--accent-purple);">SC</div>
                            <span class="transaction-name">Sean Conley</span>
                        </div>
                        <span class="transaction-type upgrade">Upgrade</span>
                        <span class="transaction-plan">Creator â†’ Pro</span>
                        <span class="transaction-amount positive">+$200</span>
                        <span class="transaction-status completed"><span class="dot"></span> Completed</span>
                    </div>
                    <div class="transaction-row">
                        <div class="transaction-date">Dec 21</div>
                        <div class="transaction-client">
                            <div class="transaction-avatar" style="background: var(--accent-red-soft); color: var(--accent-red);">LT</div>
                            <span class="transaction-name">Lisa Thompson</span>
                        </div>
                        <span class="transaction-type refund">Refund</span>
                        <span class="transaction-plan">Growth Plan</span>
                        <span class="transaction-amount negative">-$297</span>
                        <span class="transaction-status completed"><span class="dot"></span> Processed</span>
                    </div>
                    <div class="transaction-row">
                        <div class="transaction-date">Dec 21</div>
                        <div class="transaction-client">
                            <div class="transaction-avatar">MK</div>
                            <span class="transaction-name">Mike Kim</span>
                        </div>
                        <span class="transaction-type trial">Trial Start</span>
                        <span class="transaction-plan">Free Trial</span>
                        <span class="transaction-amount">$0</span>
                        <span class="transaction-status completed"><span class="dot"></span> Active</span>
                    </div>
                    <div class="transaction-row">
                        <div class="transaction-date">Dec 20</div>
                        <div class="transaction-client">
                            <div class="transaction-avatar" style="background: var(--accent-orange-soft); color: var(--accent-orange);">EM</div>
                            <span class="transaction-name">Emma Martinez</span>
                        </div>
                        <span class="transaction-type purchase">Purchase</span>
                        <span class="transaction-plan">Creator Plan</span>
                        <span class="transaction-amount positive">+$297</span>
                        <span class="transaction-status pending"><span class="dot"></span> Pending</span>
                    </div>
                </div>
            </div>

            <!-- Admin Action Columns (Kanban) -->
            <div class="admin-columns">
                <!-- Late Projects Column -->
                <div class="admin-column late">
                    <div class="column-header">
                        <div class="column-title">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                            Late Projects
                        </div>
                        <div class="column-count">3</div>
                    </div>
                    <div class="column-content">
                        <div class="late-card-compact">
                            <div class="late-card-header">
                                <div class="late-card-client">
                                    <div class="late-card-avatar" style="background: var(--tier-pro);">TP</div>
                                    <span class="late-card-name">TechStartup Pro</span>
                                </div>
                                <span class="sla-status-badge at-risk">At Risk</span>
                            </div>
                            <div class="late-card-project">YouTube Tutorial: API Integration</div>
                            <div class="late-card-sla">
                                <div class="sla-item">
                                    <span class="sla-label">Editor Due</span>
                                    <span class="sla-value editor-due">Dec 21 (2d late)</span>
                                </div>
                                <div class="sla-item">
                                    <span class="sla-label">Client Due</span>
                                    <span class="sla-value client-due">Dec 22 (1d late)</span>
                                </div>
                            </div>
                            <div class="late-card-actions">
                                <button class="late-action primary">Reassign</button>
                                <button class="late-action">Message</button>
                            </div>
                        </div>

                        <div class="late-card-compact">
                            <div class="late-card-header">
                                <div class="late-card-client">
                                    <div class="late-card-avatar" style="background: var(--tier-creator);">CC</div>
                                    <span class="late-card-name">CreatorCo</span>
                                </div>
                                <span class="sla-status-badge at-risk">At Risk</span>
                            </div>
                            <div class="late-card-project">Instagram Reel: Product Showcase</div>
                            <div class="late-card-sla">
                                <div class="sla-item">
                                    <span class="sla-label">Editor Due</span>
                                    <span class="sla-value editor-due">Dec 22 (1d late)</span>
                                </div>
                                <div class="sla-item">
                                    <span class="sla-label">Client Due</span>
                                    <span class="sla-value client-due">Dec 23 (Today)</span>
                                </div>
                            </div>
                            <div class="late-card-actions">
                                <button class="late-action primary">Reassign</button>
                                <button class="late-action">Message</button>
                            </div>
                        </div>

                        <div class="late-card-compact">
                            <div class="late-card-header">
                                <div class="late-card-client">
                                    <div class="late-card-avatar" style="background: var(--tier-growth);">MR</div>
                                    <span class="late-card-name">Mike Rodriguez</span>
                                </div>
                                <span class="sla-status-badge watch">Watch</span>
                            </div>
                            <div class="late-card-project">TikTok: Behind the Scenes</div>
                            <div class="late-card-sla">
                                <div class="sla-item">
                                    <span class="sla-label">Editor Due</span>
                                    <span class="sla-value editor-due">Dec 23 (6h late)</span>
                                </div>
                                <div class="sla-item">
                                    <span class="sla-label">Client Due</span>
                                    <span class="sla-value">Dec 24</span>
                                </div>
                            </div>
                            <div class="late-card-actions">
                                <button class="late-action primary">Reassign</button>
                                <button class="late-action">Message</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Free Trials Column -->
                <div class="admin-column trials">
                    <div class="column-header">
                        <div class="column-title">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="8.5" cy="7" r="4"/><polyline points="17 11 19 13 23 9"/></svg>
                            Free Trials
                        </div>
                        <div class="column-count">4</div>
                    </div>
                    <div class="column-content">
                        <div class="trial-card-compact">
                            <div class="trial-card-header">
                                <div class="trial-card-user">
                                    <div class="trial-card-avatar">JD</div>
                                    <span class="trial-card-name">John Davis</span>
                                </div>
                                <div class="trial-stage ready">Ready to Edit</div>
                            </div>
                            <div class="trial-card-meta">
                                <span>Signed up 2h ago</span>
                                <span>Blueprint complete</span>
                            </div>
                            <div class="trial-card-actions">
                                <button class="trial-action primary">Assign Editor</button>
                                <button class="trial-action">View</button>
                            </div>
                        </div>

                        <div class="trial-card-compact">
                            <div class="trial-card-header">
                                <div class="trial-card-user">
                                    <div class="trial-card-avatar">SL</div>
                                    <span class="trial-card-name">Sarah Lee</span>
                                </div>
                                <div class="trial-stage step3">Step 3</div>
                            </div>
                            <div class="trial-card-meta">
                                <span>Signed up 5h ago</span>
                                <span>Submitting project</span>
                            </div>
                            <div class="trial-card-actions">
                                <button class="trial-action">Message</button>
                                <button class="trial-action">View</button>
                            </div>
                        </div>

                        <div class="trial-card-compact">
                            <div class="trial-card-header">
                                <div class="trial-card-user">
                                    <div class="trial-card-avatar">AK</div>
                                    <span class="trial-card-name">Alex Kim</span>
                                </div>
                                <div class="trial-stage step2">Step 2</div>
                            </div>
                            <div class="trial-card-meta">
                                <span>Signed up 1d ago</span>
                                <span>Building blueprint</span>
                            </div>
                            <div class="trial-card-actions">
                                <button class="trial-action">Message</button>
                                <button class="trial-action">View</button>
                            </div>
                        </div>

                        <div class="trial-card-compact">
                            <div class="trial-card-header">
                                <div class="trial-card-user">
                                    <div class="trial-card-avatar">BW</div>
                                    <span class="trial-card-name">Brian Wilson</span>
                                </div>
                                <div class="trial-stage step1">Step 1</div>
                            </div>
                            <div class="trial-card-meta">
                                <span>Signed up 3d ago</span>
                                <span>Completing profile</span>
                            </div>
                            <div class="trial-card-actions">
                                <button class="trial-action primary">Nudge</button>
                                <button class="trial-action">View</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Awaiting Response Column -->
                <div class="admin-column awaiting">
                    <div class="column-header">
                        <div class="column-title">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                            Awaiting Response
                        </div>
                        <div class="column-count">5</div>
                    </div>
                    <div class="column-content">
                        <div class="awaiting-card">
                            <div class="awaiting-header">
                                <div class="awaiting-client">
                                    <div class="awaiting-avatar" style="background: var(--tier-pro);">EM</div>
                                    <span class="awaiting-name">Emma Martinez</span>
                                </div>
                                <div class="wait-time urgent">4h 23m</div>
                            </div>
                            <div class="awaiting-message">"Hey, I submitted revisions yesterday but haven't heard back. Is everything okay with my project?"</div>
                            <div class="awaiting-timestamp">Sent Dec 21, 2024 at 8:42 AM</div>
                            <div class="awaiting-actions">
                                <button class="awaiting-action primary">Reply Now</button>
                                <button class="awaiting-action">View Chat</button>
                            </div>
                        </div>

                        <div class="awaiting-card">
                            <div class="awaiting-header">
                                <div class="awaiting-client">
                                    <div class="awaiting-avatar" style="background: var(--tier-creator);">SC</div>
                                    <span class="awaiting-name">Sean Conley</span>
                                </div>
                                <div class="wait-time warning">2h 15m</div>
                            </div>
                            <div class="awaiting-message">"Can we schedule a quick call to discuss the new project direction? I have some ideas I'd like to share."</div>
                            <div class="awaiting-timestamp">Sent Dec 21, 2024 at 10:50 AM</div>
                            <div class="awaiting-actions">
                                <button class="awaiting-action primary">Reply Now</button>
                                <button class="awaiting-action">View Chat</button>
                            </div>
                        </div>

                        <div class="awaiting-card">
                            <div class="awaiting-header">
                                <div class="awaiting-client">
                                    <div class="awaiting-avatar" style="background: var(--tier-growth);">LT</div>
                                    <span class="awaiting-name">Lisa Thompson</span>
                                </div>
                                <div class="wait-time warning">1h 45m</div>
                            </div>
                            <div class="awaiting-message">"The edit looks great! Just one small tweak - can we make the intro text a bit smaller?"</div>
                            <div class="awaiting-timestamp">Sent Dec 21, 2024 at 11:20 AM</div>
                            <div class="awaiting-actions">
                                <button class="awaiting-action primary">Reply Now</button>
                                <button class="awaiting-action">View Chat</button>
                            </div>
                        </div>

                        <div class="awaiting-card">
                            <div class="awaiting-header">
                                <div class="awaiting-client">
                                    <div class="awaiting-avatar" style="background: var(--tier-starter);">DK</div>
                                    <span class="awaiting-name">David Kim</span>
                                </div>
                                <div class="wait-time ok">32m</div>
                            </div>
                            <div class="awaiting-message">"Thanks for the quick turnaround! I'll review and get back to you."</div>
                            <div class="awaiting-timestamp">Sent Dec 21, 2024 at 12:33 PM</div>
                            <div class="awaiting-actions">
                                <button class="awaiting-action primary">Reply Now</button>
                                <button class="awaiting-action">View Chat</button>
                            </div>
                        </div>

                        <div class="awaiting-card">
                            <div class="awaiting-header">
                                <div class="awaiting-client">
                                    <div class="awaiting-avatar" style="background: var(--tier-pro);">RJ</div>
                                    <span class="awaiting-name">Rachel Johnson</span>
                                </div>
                                <div class="wait-time ok">15m</div>
                            </div>
                            <div class="awaiting-message">"Just uploaded the new footage. Let me know if you need anything else!"</div>
                            <div class="awaiting-timestamp">Sent Dec 21, 2024 at 12:50 PM</div>
                            <div class="awaiting-actions">
                                <button class="awaiting-action primary">Reply Now</button>
                                <button class="awaiting-action">View Chat</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Editor Management -->
            <div class="section-header">
                <h2 class="section-title">Editor Management</h2>
                <button class="admin-action-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
                    Manage Roles
                </button>
            </div>

            <div class="editor-table">
                <div class="editor-table-header">
                    <span>Editor</span>
                    <span>Clients</span>
                    <span>Active</span>
                    <span>Avg Rating</span>
                    <span>Turnaround</span>
                    <span>Health</span>
                    <span>Actions</span>
                </div>

                <div class="editor-row">
                    <div class="editor-info">
                        <div class="editor-avatar">
                            JM
                            <div class="status-dot"></div>
                        </div>
                        <div class="editor-details">
                            <span class="editor-name">Jake Martinez</span>
                            <span class="editor-email">jake@contentbug.io</span>
                        </div>
                    </div>
                    <div class="editor-stat">12</div>
                    <div class="editor-stat">8</div>
                    <div class="editor-stat good">9.4</div>
                    <div class="editor-stat">1.2d</div>
                    <div class="health-badge healthy"><span class="dot"></span> Healthy</div>
                    <div class="editor-actions-cell">
                        <button class="editor-action-btn">View</button>
                        <button class="editor-action-btn">Edit</button>
                    </div>
                </div>

                <div class="editor-row">
                    <div class="editor-info">
                        <div class="editor-avatar">
                            AM
                            <div class="status-dot"></div>
                        </div>
                        <div class="editor-details">
                            <span class="editor-name">Amy Chen</span>
                            <span class="editor-email">amy@contentbug.io</span>
                        </div>
                    </div>
                    <div class="editor-stat">10</div>
                    <div class="editor-stat">6</div>
                    <div class="editor-stat good">9.2</div>
                    <div class="editor-stat">1.4d</div>
                    <div class="health-badge healthy"><span class="dot"></span> Healthy</div>
                    <div class="editor-actions-cell">
                        <button class="editor-action-btn">View</button>
                        <button class="editor-action-btn">Edit</button>
                    </div>
                </div>

                <div class="editor-row">
                    <div class="editor-info">
                        <div class="editor-avatar">
                            TB
                            <div class="status-dot offline"></div>
                        </div>
                        <div class="editor-details">
                            <span class="editor-name">Tyler Brooks</span>
                            <span class="editor-email">tyler@contentbug.io</span>
                        </div>
                    </div>
                    <div class="editor-stat">8</div>
                    <div class="editor-stat">5</div>
                    <div class="editor-stat warning">8.1</div>
                    <div class="editor-stat">2.1d</div>
                    <div class="health-badge watch"><span class="dot"></span> Watch</div>
                    <div class="editor-actions-cell">
                        <button class="editor-action-btn">View</button>
                        <button class="editor-action-btn">Edit</button>
                    </div>
                </div>

                <div class="editor-row">
                    <div class="editor-info">
                        <div class="editor-avatar">
                            SL
                            <div class="status-dot"></div>
                        </div>
                        <div class="editor-details">
                            <span class="editor-name">Sophie Lee</span>
                            <span class="editor-email">sophie@contentbug.io</span>
                        </div>
                    </div>
                    <div class="editor-stat">15</div>
                    <div class="editor-stat">10</div>
                    <div class="editor-stat good">9.6</div>
                    <div class="editor-stat">1.1d</div>
                    <div class="health-badge healthy"><span class="dot"></span> Healthy</div>
                    <div class="editor-actions-cell">
                        <button class="editor-action-btn">View</button>
                        <button class="editor-action-btn">Edit</button>
                    </div>
                </div>

                <div class="editor-row">
                    <div class="editor-info">
                        <div class="editor-avatar">
                            MG
                            <div class="status-dot offline"></div>
                        </div>
                        <div class="editor-details">
                            <span class="editor-name">Marcus Green</span>
                            <span class="editor-email">marcus@contentbug.io</span>
                        </div>
                    </div>
                    <div class="editor-stat">6</div>
                    <div class="editor-stat">4</div>
                    <div class="editor-stat bad">7.2</div>
                    <div class="editor-stat">2.8d</div>
                    <div class="health-badge risk"><span class="dot"></span> At Risk</div>
                    <div class="editor-actions-cell">
                        <button class="editor-action-btn">View</button>
                        <button class="editor-action-btn">Edit</button>
                    </div>
                </div>
            </div>

            <!-- Grading System -->
            <div class="section-header">
                <h2 class="section-title">Content Bug Performance Grades</h2>
            </div>

            <div class="grading-section">
                <div class="grading-card">
                    <div class="grading-header">
                        <div class="grading-title">Company Average</div>
                        <div class="grading-score good">A-</div>
                    </div>
                    <div class="grading-metrics">
                        <div class="grading-metric">
                            <span class="metric-label">On-Time Delivery</span>
                            <div class="metric-bar-container">
                                <div class="metric-bar good" style="width: 94%;"></div>
                            </div>
                            <span class="metric-value">94%</span>
                        </div>
                        <div class="grading-metric">
                            <span class="metric-label">Client Satisfaction</span>
                            <div class="metric-bar-container">
                                <div class="metric-bar good" style="width: 91%;"></div>
                            </div>
                            <span class="metric-value">9.1</span>
                        </div>
                        <div class="grading-metric">
                            <span class="metric-label">First-Pass Rate</span>
                            <div class="metric-bar-container">
                                <div class="metric-bar good" style="width: 87%;"></div>
                            </div>
                            <span class="metric-value">87%</span>
                        </div>
                        <div class="grading-metric">
                            <span class="metric-label">Response Time</span>
                            <div class="metric-bar-container">
                                <div class="metric-bar warning" style="width: 78%;"></div>
                            </div>
                            <span class="metric-value">78%</span>
                        </div>
                    </div>
                </div>

                <div class="grading-card">
                    <div class="grading-header">
                        <div class="grading-title">This Week vs Last</div>
                        <div class="grading-score good">+5%</div>
                    </div>
                    <div class="grading-metrics">
                        <div class="grading-metric">
                            <span class="metric-label">Projects Completed</span>
                            <div class="metric-bar-container">
                                <div class="metric-bar good" style="width: 85%;"></div>
                            </div>
                            <span class="metric-value">42</span>
                        </div>
                        <div class="grading-metric">
                            <span class="metric-label">New Clients</span>
                            <div class="metric-bar-container">
                                <div class="metric-bar good" style="width: 60%;"></div>
                            </div>
                            <span class="metric-value">8</span>
                        </div>
                        <div class="grading-metric">
                            <span class="metric-label">Trial Conversions</span>
                            <div class="metric-bar-container">
                                <div class="metric-bar warning" style="width: 65%;"></div>
                            </div>
                            <span class="metric-value">65%</span>
                        </div>
                        <div class="grading-metric">
                            <span class="metric-label">Churn Prevention</span>
                            <div class="metric-bar-container">
                                <div class="metric-bar good" style="width: 95%;"></div>
                            </div>
                            <span class="metric-value">95%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Revenue Pulse Animation Container -->
    <div class="revenue-pulse-container" id="revenuePulseContainer"></div>

    <script>
        // ==================== REVENUE PULSE SYSTEM ====================
        const revenuePulse = {
            container: null,
            lastSeenTimestamp: null,
            storageKey: 'cb_admin_last_pulse',

            init() {
                this.container = document.getElementById('revenuePulseContainer');
                this.lastSeenTimestamp = parseInt(localStorage.getItem(this.storageKey) || '0');

                // For demo: trigger sample pulses after short delay
                if (window.location.search.includes('demo=1')) {
                    setTimeout(() => this.showPurchase('Alex M.', 'Pro Plan'), 2000);
                    setTimeout(() => this.showTrial('Sarah K.'), 5000);
                }
            },

            show(type, message, icon) {
                if (!this.container) return;

                // Check prefers-reduced-motion
                const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

                const pulse = document.createElement('div');
                pulse.className = `revenue-pulse ${type}`;
                pulse.innerHTML = `
                    <span class="revenue-pulse-icon">${icon}</span>
                    <span>${message}</span>
                `;

                this.container.appendChild(pulse);

                // Auto-dismiss after 3 seconds
                setTimeout(() => {
                    pulse.classList.add('exiting');
                    setTimeout(() => pulse.remove(), 300);
                }, 3000);

                // Update last seen timestamp
                this.lastSeenTimestamp = Date.now();
                localStorage.setItem(this.storageKey, this.lastSeenTimestamp.toString());
            },

            showPurchase(clientName, planName) {
                this.show('purchase', `New ${planName} â€” ${clientName}`, 'ðŸŽ‰');
            },

            showTrial(clientName) {
                this.show('trial', `New Free Trial â€” ${clientName}`, 'âœ¨');
            },

            showUpgrade(clientName, fromPlan, toPlan) {
                this.show('purchase', `Upgrade: ${fromPlan} â†’ ${toPlan} â€” ${clientName}`, 'ðŸš€');
            },

            // Process incoming events (from webhook/polling)
            processEvent(event) {
                // Skip if already seen (prevent replay on refresh)
                if (event.timestamp <= this.lastSeenTimestamp) return;

                switch(event.type) {
                    case 'purchase':
                        this.showPurchase(event.clientName, event.planName);
                        break;
                    case 'trial':
                        this.showTrial(event.clientName);
                        break;
                    case 'upgrade':
                        this.showUpgrade(event.clientName, event.fromPlan, event.toPlan);
                        break;
                }
            }
        };

        // ==================== REVENUE DATA LOADING ====================
        const revenueData = {
            async load() {
                // In production, fetch from GHL/Airtable via MCP
                // For now, show placeholder data (already in HTML)
                try {
                    // Placeholder for future API integration
                    // const response = await fetch('/api/revenue');
                    // const data = await response.json();
                    // this.update(data);
                } catch (error) {
                    console.warn('Revenue data not available:', error);
                    // Show "Updating..." state
                    this.showUpdatingState();
                }
            },

            showUpdatingState() {
                // Elements show placeholder data, which is fine for now
                const elements = ['revenueTotal', 'revenueRefunds', 'revenueNet', 'revenueSubscriptions'];
                elements.forEach(id => {
                    const el = document.getElementById(id);
                    if (el && el.textContent === '-') {
                        el.textContent = 'Updating...';
                    }
                });
            },

            update(data) {
                if (data.totalRevenue) document.getElementById('revenueTotal').textContent = this.formatCurrency(data.totalRevenue);
                if (data.refunds) document.getElementById('revenueRefunds').textContent = '-' + this.formatCurrency(data.refunds);
                if (data.netRevenue) document.getElementById('revenueNet').textContent = this.formatCurrency(data.netRevenue);
                if (data.subscriptions) document.getElementById('revenueSubscriptions').textContent = data.subscriptions;
                if (data.purchases24h) document.getElementById('activityPurchases').textContent = data.purchases24h;
                if (data.trials24h) document.getElementById('activityTrials').textContent = data.trials24h;
                if (data.upcomingPayments) document.getElementById('activityUpcoming').textContent = data.upcomingPayments;
            },

            formatCurrency(amount) {
                return '$' + amount.toLocaleString('en-US');
            }
        };

        // ==================== AUTO-CREATION HELPERS ====================
        const autoCreate = {
            // Drive folder structure (IDs stored in Airtable)
            driveStructure: {
                'Approved Videos': { retention: '30-day' },
                'Brand Assets': {
                    'Logos': {},
                    'Intros-Outros': {},
                    'Thumbnail Headshots': {
                        'Happy': {},
                        'Shocked': {},
                        'Unimpressed': {}
                    }
                }
            },

            // Create client resources on account creation
            async onClientCreated(clientData) {
                console.log('Auto-creating resources for:', clientData.name);

                // These would be triggered via webhook/Make.com
                // 1. Create Drive folders
                // 2. Create chat channel
                // 3. Scaffold project folder

                // For now, log the intent
                return {
                    driveFoldersCreated: true,
                    chatChannelCreated: true,
                    projectFolderScaffolded: true
                };
            },

            // Create chat channel
            async createChatChannel(clientId, clientName) {
                // Would POST to MCP server /chat/channels
                console.log('Creating chat channel for:', clientName);
                return { channelId: 'ch_' + Date.now() };
            }
        };

        // ==================== USER DATA MANAGEMENT ====================
        function getUserData() {
            return {
                role: localStorage.getItem('cb_role') || 'client',
                name: localStorage.getItem('cb_name') || 'User',
                firstName: localStorage.getItem('cb_first_name') || localStorage.getItem('cb_name') || 'User',
                email: localStorage.getItem('cb_email') || '',
                plan: localStorage.getItem('cb_plan') || 'Free Trial'
            };
        }

        function logout() {
            localStorage.removeItem('cb_email');
            localStorage.removeItem('cb_name');
            localStorage.removeItem('cb_first_name');
            localStorage.removeItem('cb_role');
            localStorage.removeItem('cb_plan');
            localStorage.removeItem('cb_airtable_id');
            localStorage.removeItem('cb_subscription_status');
            localStorage.removeItem('cb_onboarding_complete');
            localStorage.removeItem('cb_edit_slots');
            window.location.href = 'https://app.contentbug.io/login';
        }

        // ==================== ROLE MANAGEMENT ====================
        function getUserRole() {
            return localStorage.getItem('cb_role') || 'admin';
        }

        function setUserRole(role) {
            localStorage.setItem('cb_role', role);
            document.getElementById('appContainer').setAttribute('data-role', role);
            updateUserDisplay(role);
        }

        function updateUserDisplay(role) {
            const userData = getUserData();
            const avatar = document.getElementById('userAvatar');
            const roleEl = document.getElementById('userRole');
            const nameEl = document.getElementById('userName');

            nameEl.textContent = userData.firstName;
            const initials = userData.firstName.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2);
            avatar.textContent = initials;

            avatar.className = 'user-avatar ' + role;
            roleEl.className = 'user-role ' + role;
            roleEl.textContent = role.charAt(0).toUpperCase() + role.slice(1);
        }

        // ==================== USER MENU ====================
        function initUserMenu() {
            const userProfile = document.getElementById('userProfile');

            const menu = document.createElement('div');
            menu.className = 'user-dropdown';
            menu.innerHTML = `
                <a href="https://app.contentbug.io/account" class="dropdown-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                    Account Settings
                </a>
                <a href="https://app.contentbug.io/chat" class="dropdown-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                    Chat
                </a>
                <a href="https://app.contentbug.io/team" class="dropdown-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/></svg>
                    Team
                </a>
                <div class="dropdown-divider"></div>
                <button class="dropdown-item logout" onclick="logout()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                    Logout
                </button>
            `;

            // Add styles
            const style = document.createElement('style');
            style.textContent = `
                .user-profile { position: relative; }
                .user-dropdown {
                    position: absolute;
                    top: calc(100% + 8px);
                    right: 0;
                    min-width: 180px;
                    background: var(--bg-elevated);
                    border: 1px solid var(--border-default);
                    border-radius: var(--radius-md);
                    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
                    padding: var(--space-xs);
                    opacity: 0;
                    visibility: hidden;
                    transform: translateY(-8px);
                    transition: all 0.2s ease;
                    z-index: 1000;
                }
                .user-dropdown.visible {
                    opacity: 1;
                    visibility: visible;
                    transform: translateY(0);
                }
                .dropdown-item {
                    display: flex;
                    align-items: center;
                    gap: var(--space-sm);
                    width: 100%;
                    padding: var(--space-sm) var(--space-md);
                    background: transparent;
                    border: none;
                    border-radius: var(--radius-sm);
                    color: var(--text-secondary);
                    font-size: 13px;
                    font-weight: 500;
                    text-decoration: none;
                    cursor: pointer;
                    transition: all 0.15s ease;
                }
                .dropdown-item:hover {
                    background: var(--bg-hover);
                    color: var(--text-primary);
                }
                .dropdown-item.logout { color: var(--accent-red); }
                .dropdown-item.logout:hover { background: var(--accent-red-soft); }
                .dropdown-divider {
                    height: 1px;
                    background: var(--border-subtle);
                    margin: var(--space-xs) 0;
                }
            `;
            document.head.appendChild(style);

            userProfile.appendChild(menu);

            userProfile.addEventListener('click', function(e) {
                e.stopPropagation();
                menu.classList.toggle('visible');
            });

            document.addEventListener('click', function() {
                menu.classList.remove('visible');
            });
        }

        // ==================== INITIALIZATION ====================
        document.addEventListener('DOMContentLoaded', function() {
            let userData = getUserData();

            // Check if user is logged in (allow local file testing)
            const isLocalFile = window.location.protocol === 'file:';
            if (!userData.email && !isLocalFile) {
                window.location.href = 'https://app.contentbug.io/login';
                return;
            }

            // Demo mode for local file testing
            if (isLocalFile && !userData.email) {
                localStorage.setItem('cb_email', 'sean@contentbug.io');
                localStorage.setItem('cb_name', 'Sean Conley');
                localStorage.setItem('cb_first_name', 'Sean');
                localStorage.setItem('cb_role', 'owner');
                localStorage.setItem('cb_plan', 'Pro');
                userData = getUserData();
            }

            const role = userData.role;

            // Verify admin/owner access (skip for local demo)
            if (!isLocalFile && role !== 'admin' && role !== 'owner') {
                // Redirect non-admin users to appropriate dashboard
                if (role === 'editor') {
                    window.location.href = 'https://app.contentbug.io/editor';
                } else {
                    window.location.href = 'https://app.contentbug.io/projects';
                }
                return;
            }

            setUserRole(role);
            initUserMenu();

            // Initialize Revenue Systems
            revenuePulse.init();
            revenueData.load();

            window.setUserRole = setUserRole;
            window.logout = logout;
            window.revenuePulse = revenuePulse; // Expose for webhook triggers

            // Update wait times periodically
            updateWaitTimes();
            setInterval(updateWaitTimes, 60000);
        });

        // ==================== WAIT TIME UPDATES ====================
        function updateWaitTimes() {
            // In production, this would calculate real wait times from message timestamps
        }

        // ==================== NOTIFICATION SYSTEM ====================
        const notifications = {
            unreadCount: 0,

            updateBadge(count) {
                this.unreadCount = count;
                const chatBtn = document.querySelector('.nav-btn[href*="chat"]');
                if (!chatBtn) return;

                // Remove existing badge
                const existingBadge = chatBtn.querySelector('.notification-badge');
                if (existingBadge) existingBadge.remove();

                // Add new badge if count > 0
                if (count > 0) {
                    const badge = document.createElement('span');
                    badge.className = 'notification-badge';
                    badge.textContent = count > 99 ? '99+' : count;
                    chatBtn.appendChild(badge);
                }
            },

            increment() {
                this.updateBadge(this.unreadCount + 1);
            },

            clear() {
                this.updateBadge(0);
            }
        };

        // Demo: Show notification badge
        setTimeout(() => notifications.updateBadge(3), 1000);
    </script>
    <!-- Shell Controller for persistence -->
    <script src="../shared/_app.js" defer></script>
</body>
</html>
