<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Account â€” Content Bug</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg-base: #050508;
            --bg-card: #0a0a0f;
            --bg-input: #08080c;
            --border-subtle: #1a1a2e;
            --text-primary: #ffffff;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --accent-blue: #3b82f6;
            --accent-blue-dark: #1e3a8a;
            --accent-green: #22c55e;
            --accent-red: #ef4444;
        }

        html, body {
            height: 100%;
            background: var(--bg-base);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            color: var(--text-primary);
        }

        /* Background */
        .bg-layer {
            position: fixed;
            inset: 0;
            background: var(--bg-base);
        }

        .bg-gradient {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 250vw;
            height: 200vh;
            background: radial-gradient(ellipse at center, rgba(30, 58, 138, 0.08) 0%, rgba(15, 23, 42, 0.04) 40%, transparent 70%);
            filter: blur(100px);
        }

        .bg-grid {
            position: absolute;
            inset: 0;
            background-image: linear-gradient(rgba(59, 130, 246, 0.08) 1px, transparent 1px), linear-gradient(90deg, rgba(59, 130, 246, 0.08) 1px, transparent 1px);
            background-size: 50px 50px;
            mask-image: radial-gradient(ellipse at center, black 0%, transparent 85%);
        }

        /* Container */
        .signup-container {
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
        }

        /* Card */
        .signup-card {
            background: linear-gradient(165deg, rgba(15, 15, 25, 0.98) 0%, rgba(8, 8, 15, 0.99) 100%);
            border: 1px solid rgba(59, 130, 246, 0.15);
            border-radius: 24px;
            padding: 48px;
            width: 100%;
            max-width: 460px;
            box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.1), 0 25px 50px -12px rgba(0, 0, 0, 0.9), 0 0 100px -20px rgba(59, 130, 246, 0.15);
        }

        /* Logo */
        .logo-section {
            text-align: center;
            margin-bottom: 32px;
        }

        .logo-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 16px;
        }

        .logo-icon img {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 6px 24px rgba(0, 0, 0, 0.5)) drop-shadow(0 2px 8px rgba(59, 130, 246, 0.4));
        }

        .signup-title {
            font-size: 24px;
            font-weight: 800;
            margin-bottom: 8px;
            background: linear-gradient(90deg, #fff 0%, #fff 35%, #93c5fd 50%, #fff 65%, #fff 100%);
            background-size: 200% 100%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleShimmer 4s ease-in-out infinite;
        }

        @keyframes titleShimmer {
            0% { background-position: 100% 0; }
            100% { background-position: -100% 0; }
        }

        .signup-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* Steps Indicator */
        .steps-indicator {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 32px;
        }

        .step-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(59, 130, 246, 0.2);
            transition: all 0.3s ease;
        }

        .step-dot.active {
            background: var(--accent-blue);
            box-shadow: 0 0 12px rgba(59, 130, 246, 0.5);
        }

        .step-dot.completed {
            background: var(--accent-green);
        }

        /* Form Steps */
        .form-step {
            display: none;
        }

        .form-step.active {
            display: block;
            animation: fadeSlideUp 0.4s ease;
        }

        @keyframes fadeSlideUp {
            from { opacity: 0; transform: translateY(12px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .form-input {
            width: 100%;
            padding: 16px 18px;
            background: var(--bg-input);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            color: var(--text-primary);
            font-size: 15px;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1), 0 0 40px -10px rgba(59, 130, 246, 0.3);
        }

        .form-input::placeholder {
            color: var(--text-muted);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        /* Code Input */
        .code-inputs {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin: 24px 0;
        }

        .code-input {
            width: 52px;
            height: 64px;
            text-align: center;
            font-size: 24px;
            font-weight: 700;
            background: var(--bg-input);
            border: 2px solid var(--border-subtle);
            border-radius: 12px;
            color: var(--text-primary);
            transition: all 0.2s ease;
        }

        .code-input:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.15);
        }

        .code-input.filled {
            border-color: var(--accent-green);
            background: rgba(34, 197, 94, 0.1);
        }

        /* Buttons */
        .btn-primary {
            width: 100%;
            padding: 18px 28px;
            background: linear-gradient(135deg, var(--accent-blue-dark) 0%, var(--accent-blue) 100%);
            border: none;
            border-radius: 14px;
            color: white;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(30, 58, 138, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(59, 130, 246, 0.5);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            width: 100%;
            padding: 14px 24px;
            background: transparent;
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 12px;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.2);
        }

        /* Resend Link */
        .resend-link {
            text-align: center;
            margin-top: 16px;
            font-size: 13px;
            color: var(--text-muted);
        }

        .resend-link a {
            color: var(--accent-blue);
            text-decoration: none;
            font-weight: 600;
        }

        .resend-link a:hover {
            text-decoration: underline;
        }

        /* Error/Success Messages */
        .message {
            padding: 12px 16px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 20px;
            display: none;
        }

        .message.error {
            display: block;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: var(--accent-red);
        }

        .message.success {
            display: block;
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            color: var(--accent-green);
        }

        /* Info Text */
        .info-text {
            text-align: center;
            font-size: 13px;
            color: var(--text-muted);
            margin-top: 12px;
            line-height: 1.6;
        }

        .info-text strong {
            color: var(--text-secondary);
        }

        /* Login Link */
        .login-link {
            text-align: center;
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid var(--border-subtle);
            font-size: 14px;
            color: var(--text-secondary);
        }

        .login-link a {
            color: var(--accent-blue);
            text-decoration: none;
            font-weight: 600;
        }

        .login-link a:hover {
            text-decoration: underline;
        }

        /* Success State */
        .success-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 24px;
            background: rgba(34, 197, 94, 0.15);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .success-icon svg {
            width: 40px;
            height: 40px;
            color: var(--accent-green);
        }

        /* Loading Spinner */
        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            display: inline-block;
            margin-right: 8px;
            vertical-align: middle;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Phone input with flag */
        .phone-input-wrapper {
            display: flex;
            gap: 12px;
        }

        .country-code {
            width: 90px;
            padding: 16px 12px;
            background: var(--bg-input);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            color: var(--text-primary);
            font-size: 15px;
            text-align: center;
        }

        /* ==================== LEAD QUALIFICATION (FREE TRIAL) ==================== */
        .qual-section-title {
            font-size: 15px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 16px;
            text-align: center;
        }

        .qual-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        .qual-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
            background: var(--bg-input);
            border: 2px solid var(--border-subtle);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .qual-option:hover {
            border-color: rgba(59, 130, 246, 0.3);
            background: rgba(59, 130, 246, 0.05);
        }

        .qual-option.selected {
            border-color: var(--accent-blue);
            background: rgba(59, 130, 246, 0.1);
        }

        .qual-option input[type="radio"],
        .qual-option input[type="checkbox"] {
            display: none;
        }

        .qual-option-check {
            width: 22px;
            height: 22px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        .qual-option.checkbox .qual-option-check {
            border-radius: 6px;
        }

        .qual-option.selected .qual-option-check {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
        }

        .qual-option-check svg {
            width: 12px;
            height: 12px;
            color: white;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .qual-option.selected .qual-option-check svg {
            opacity: 1;
        }

        .qual-option-text {
            font-size: 14px;
            color: var(--text-secondary);
            flex: 1;
        }

        .qual-option.selected .qual-option-text {
            color: var(--text-primary);
        }

        .qual-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .qual-grid .qual-option {
            justify-content: center;
            text-align: center;
        }

        .qual-grid .qual-option .qual-option-check {
            display: none;
        }

        /* Number input for output */
        .output-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 20px;
        }

        .output-group label {
            display: block;
            font-size: 12px;
            color: var(--text-muted);
            margin-bottom: 6px;
        }

        .output-group input {
            width: 100%;
            padding: 12px 16px;
            background: var(--bg-input);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 16px;
            text-align: center;
        }

        .output-group input:focus {
            outline: none;
            border-color: var(--accent-blue);
        }

        .phone-input-wrapper .form-input {
            flex: 1;
        }
    </style>
</head>
<body>
    <div class="bg-layer">
        <div class="bg-gradient"></div>
        <div class="bg-grid"></div>
    </div>

    <div class="signup-container">
        <div class="signup-card">
            <!-- Logo -->
            <div class="logo-section">
                <div class="logo-icon">
                    <img src="https://storage.googleapis.com/msgsndr/mCNHhjy593eUueqfuqyU/media/6945a3f159a0a63165eca2d8.svg" alt="Content Bug">
                </div>
                <h1 class="signup-title" id="stepTitle">Create Your Account</h1>
                <p class="signup-subtitle" id="stepSubtitle">Let's get you set up in just a few steps</p>
            </div>

            <!-- Steps Indicator -->
            <!-- Steps: 1=Name/Email, 2=VerifyEmail, 3=Phone, 4=VerifyPhone, 5=ContentGoals (free trial), 6=CurrentSetup (free trial), 7=Timeframe (free trial), 8=Success -->
            <div class="steps-indicator" id="stepsIndicator">
                <div class="step-dot active" data-step="1"></div>
                <div class="step-dot" data-step="2"></div>
                <div class="step-dot" data-step="3"></div>
                <div class="step-dot" data-step="4"></div>
                <div class="step-dot hidden" data-step="5"></div>
                <div class="step-dot hidden" data-step="6"></div>
                <div class="step-dot hidden" data-step="7"></div>
            </div>

            <!-- Message Area -->
            <div class="message" id="messageArea"></div>

            <!-- Step 1: Name & Email -->
            <div class="form-step active" id="step1">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">First Name</label>
                        <input type="text" class="form-input" id="firstName" placeholder="Sean" autocomplete="given-name">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Last Name</label>
                        <input type="text" class="form-input" id="lastName" placeholder="Conley" autocomplete="family-name">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" class="form-input" id="email" placeholder="you@example.com" autocomplete="email">
                </div>
                <button class="btn-primary" onclick="submitStep1()">Continue</button>
            </div>

            <!-- Step 2: Verify Email -->
            <div class="form-step" id="step2">
                <p class="info-text">
                    We sent a 6-digit code to<br>
                    <strong id="emailDisplay">your@email.com</strong>
                </p>
                <div class="code-inputs" id="emailCodeInputs">
                    <input type="text" class="code-input" maxlength="1" data-index="0">
                    <input type="text" class="code-input" maxlength="1" data-index="1">
                    <input type="text" class="code-input" maxlength="1" data-index="2">
                    <input type="text" class="code-input" maxlength="1" data-index="3">
                    <input type="text" class="code-input" maxlength="1" data-index="4">
                    <input type="text" class="code-input" maxlength="1" data-index="5">
                </div>
                <button class="btn-primary" onclick="verifyEmailCode()" id="verifyEmailBtn">Verify Email</button>
                <div class="resend-link">
                    Didn't receive it? <a href="#" onclick="resendEmailCode(); return false;">Resend code</a>
                </div>
            </div>

            <!-- Step 3: Phone Number -->
            <div class="form-step" id="step3">
                <p class="info-text">
                    Where should we text you updates about your edits?
                </p>
                <div class="form-group">
                    <label class="form-label">Phone Number</label>
                    <div class="phone-input-wrapper">
                        <input type="text" class="country-code" value="+1" readonly>
                        <input type="tel" class="form-input" id="phone" placeholder="(555) 123-4567" autocomplete="tel">
                    </div>
                </div>
                <button class="btn-primary" onclick="submitPhone()">Send Verification Code</button>
            </div>

            <!-- Step 4: Verify Phone -->
            <div class="form-step" id="step4">
                <p class="info-text">
                    Enter the code we texted to<br>
                    <strong id="phoneDisplay">(555) 123-4567</strong>
                </p>
                <div class="code-inputs" id="phoneCodeInputs">
                    <input type="text" class="code-input" maxlength="1" data-index="0">
                    <input type="text" class="code-input" maxlength="1" data-index="1">
                    <input type="text" class="code-input" maxlength="1" data-index="2">
                    <input type="text" class="code-input" maxlength="1" data-index="3">
                    <input type="text" class="code-input" maxlength="1" data-index="4">
                    <input type="text" class="code-input" maxlength="1" data-index="5">
                </div>
                <button class="btn-primary" onclick="verifyPhoneCode()" id="verifyPhoneBtn">Verify & Create Account</button>
                <div class="resend-link">
                    Didn't receive it? <a href="#" onclick="resendPhoneCode(); return false;">Resend code</a>
                </div>
            </div>

            <!-- Step 5: Content Goals (Free Trial Only) -->
            <div class="form-step" id="step5">
                <h3 class="qual-section-title">What type of content do you create?</h3>

                <div class="qual-options" id="contentTypeOptions">
                    <label class="qual-option checkbox" onclick="toggleQualOption(this)">
                        <input type="checkbox" name="contentType" value="short_form">
                        <span class="qual-option-check">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
                        </span>
                        <span class="qual-option-text">Short-form (Reels, TikToks, Shorts)</span>
                    </label>
                    <label class="qual-option checkbox" onclick="toggleQualOption(this)">
                        <input type="checkbox" name="contentType" value="long_form">
                        <span class="qual-option-check">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
                        </span>
                        <span class="qual-option-text">Long-form (YouTube, Podcasts, Courses)</span>
                    </label>
                    <label class="qual-option checkbox" onclick="toggleQualOption(this)">
                        <input type="checkbox" name="contentType" value="both">
                        <span class="qual-option-check">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
                        </span>
                        <span class="qual-option-text">Both short-form and long-form</span>
                    </label>
                </div>

                <h3 class="qual-section-title" style="margin-top: 24px;">What's your current output goal?</h3>
                <div class="output-inputs">
                    <div class="output-group">
                        <label>Short-form videos/week</label>
                        <input type="number" id="shortFormGoal" min="0" max="100" value="0" placeholder="0">
                    </div>
                    <div class="output-group">
                        <label>Long-form videos/month</label>
                        <input type="number" id="longFormGoal" min="0" max="50" value="0" placeholder="0">
                    </div>
                </div>

                <button class="btn-primary" onclick="submitContentGoals()">Continue</button>
            </div>

            <!-- Step 6: Current Setup (Free Trial Only) -->
            <div class="form-step" id="step6">
                <h3 class="qual-section-title">How do you currently handle editing?</h3>
                <p class="info-text" style="margin-bottom: 20px;">Select all that apply</p>

                <div class="qual-options" id="currentSetupOptions">
                    <label class="qual-option checkbox" onclick="toggleQualOption(this)">
                        <input type="checkbox" name="currentSetup" value="self">
                        <span class="qual-option-check">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
                        </span>
                        <span class="qual-option-text">I edit myself</span>
                    </label>
                    <label class="qual-option checkbox" onclick="toggleQualOption(this)">
                        <input type="checkbox" name="currentSetup" value="none">
                        <span class="qual-option-check">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
                        </span>
                        <span class="qual-option-text">No editing currently (just posting raw)</span>
                    </label>
                    <label class="qual-option checkbox" onclick="toggleQualOption(this)">
                        <input type="checkbox" name="currentSetup" value="inhouse">
                        <span class="qual-option-check">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
                        </span>
                        <span class="qual-option-text">In-house team</span>
                    </label>
                    <label class="qual-option checkbox" onclick="toggleQualOption(this)">
                        <input type="checkbox" name="currentSetup" value="freelancer">
                        <span class="qual-option-check">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
                        </span>
                        <span class="qual-option-text">Freelancer(s)</span>
                    </label>
                    <label class="qual-option checkbox" onclick="toggleQualOption(this)">
                        <input type="checkbox" name="currentSetup" value="agency">
                        <span class="qual-option-check">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
                        </span>
                        <span class="qual-option-text">Agency</span>
                    </label>
                </div>

                <button class="btn-primary" onclick="submitCurrentSetup()">Continue</button>
            </div>

            <!-- Step 7: Timeframe (Free Trial Only) -->
            <div class="form-step" id="step7">
                <h3 class="qual-section-title">When are you looking to get started?</h3>

                <div class="qual-options" id="timeframeOptions">
                    <label class="qual-option" onclick="selectQualOption(this, 'timeframeOptions')">
                        <input type="radio" name="timeframe" value="now">
                        <span class="qual-option-check">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
                        </span>
                        <span class="qual-option-text">Right now - I'm ready!</span>
                    </label>
                    <label class="qual-option" onclick="selectQualOption(this, 'timeframeOptions')">
                        <input type="radio" name="timeframe" value="1week">
                        <span class="qual-option-check">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
                        </span>
                        <span class="qual-option-text">Within a week</span>
                    </label>
                    <label class="qual-option" onclick="selectQualOption(this, 'timeframeOptions')">
                        <input type="radio" name="timeframe" value="2weeks">
                        <span class="qual-option-check">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
                        </span>
                        <span class="qual-option-text">Within 2 weeks</span>
                    </label>
                    <label class="qual-option" onclick="selectQualOption(this, 'timeframeOptions')">
                        <input type="radio" name="timeframe" value="1month">
                        <span class="qual-option-check">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
                        </span>
                        <span class="qual-option-text">Within a month</span>
                    </label>
                    <label class="qual-option" onclick="selectQualOption(this, 'timeframeOptions')">
                        <input type="radio" name="timeframe" value="later">
                        <span class="qual-option-check">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
                        </span>
                        <span class="qual-option-text">Just exploring for now</span>
                    </label>
                </div>

                <button class="btn-primary" onclick="submitTimeframe()">Complete Setup</button>
            </div>

            <!-- Step 8: Success -->
            <div class="form-step" id="step8">
                <div class="success-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"/>
                    </svg>
                </div>
                <p class="info-text" style="font-size: 16px; color: var(--text-primary);">
                    <strong>You're all set!</strong><br><br>
                    Your account has been created successfully.
                </p>
                <button class="btn-primary" onclick="goToPortal()" style="margin-top: 24px;">Enter Portal</button>
            </div>

            <!-- Login Link -->
            <div class="login-link" id="loginLink">
                Already have an account? <a href="login.html">Sign in</a>
            </div>
        </div>
    </div>

    <script>
        // ==================== STATE ====================
        let currentStep = 1;
        let isFreeTrial = true; // Will be set after checking GHL for active subscription
        let userData = {
            firstName: '',
            lastName: '',
            email: '',
            phone: '',
            emailVerified: false,
            phoneVerified: false,
            // Qualification data (free trial only)
            contentTypes: [],
            shortFormGoal: 0,
            longFormGoal: 0,
            currentSetup: [],
            timeframe: '',
            leadScore: 0
        };

        // Demo verification codes (in production, these come from backend)
        let emailCode = '';
        let phoneCode = '';

        // ==================== LEAD SCORING SYSTEM ====================
        // Scale: 1-10 (1=low quality, 10=high quality/hot lead)
        function calculateLeadScore() {
            let score = 5; // Base score

            // Content output volume (+1-3 points)
            const shortForm = userData.shortFormGoal || 0;
            const longForm = userData.longFormGoal || 0;
            if (shortForm >= 10 || longForm >= 4) score += 3;
            else if (shortForm >= 5 || longForm >= 2) score += 2;
            else if (shortForm >= 2 || longForm >= 1) score += 1;

            // Content type - Both is best (+1 point)
            if (userData.contentTypes.includes('both') ||
                (userData.contentTypes.includes('short_form') && userData.contentTypes.includes('long_form'))) {
                score += 1;
            }

            // Current setup - better if they already outsource (+1-2 points)
            if (userData.currentSetup.includes('agency')) score += 1;
            if (userData.currentSetup.includes('freelancer')) score += 1;
            if (userData.currentSetup.includes('inhouse')) score += 0.5;
            // Self or none = they need help (neutral)

            // Timeframe - urgency is key (+0-2 points)
            const timeframeScores = {
                'now': 2,
                '1week': 1.5,
                '2weeks': 1,
                '1month': 0.5,
                'later': -1
            };
            score += (timeframeScores[userData.timeframe] || 0);

            // Cap at 1-10
            score = Math.max(1, Math.min(10, Math.round(score)));
            userData.leadScore = score;

            console.log('Lead Score:', score, userData);
            return score;
        }

        // ==================== CHECK FOR PAID SUBSCRIPTION ====================
        async function checkPaidSubscription(email) {
            // In production: Call GHL API to check for active subscription
            // For demo, simulate check
            console.log('Checking subscription for:', email);

            // Demo: check if email contains "paid" for testing
            if (email.includes('paid')) {
                return { isPaid: true, plan: 'creator' };
            }

            // Default to free trial
            return { isPaid: false, plan: null };
        }

        // ==================== STEP NAVIGATION ====================
        function goToStep(step) {
            // Hide all steps
            document.querySelectorAll('.form-step').forEach(s => s.classList.remove('active'));

            // Show target step
            document.getElementById(`step${step}`).classList.add('active');

            // Update dots - show/hide qualification dots based on isFreeTrial
            const allDots = document.querySelectorAll('.step-dot');
            allDots.forEach((dot, i) => {
                const dotStep = i + 1;
                dot.classList.remove('active', 'completed', 'hidden');

                // Hide qual dots (5-7) for paid users
                if (!isFreeTrial && dotStep >= 5 && dotStep <= 7) {
                    dot.classList.add('hidden');
                }

                if (dotStep < step) dot.classList.add('completed');
                if (dotStep === step) dot.classList.add('active');
            });

            // Update title
            const titles = {
                1: { title: 'Create Your Account', subtitle: "Let's get you set up in just a few steps" },
                2: { title: 'Verify Your Email', subtitle: 'Check your inbox for the code' },
                3: { title: 'Add Your Phone', subtitle: "We'll text you edit updates" },
                4: { title: 'Verify Your Phone', subtitle: 'Almost there!' },
                5: { title: 'Tell Us About Your Content', subtitle: 'Help us personalize your experience' },
                6: { title: 'Your Current Setup', subtitle: 'How do you handle editing today?' },
                7: { title: 'Ready to Start?', subtitle: 'One last question!' },
                8: { title: 'Welcome to Content Bug!', subtitle: 'Your account is ready' }
            };

            document.getElementById('stepTitle').textContent = titles[step].title;
            document.getElementById('stepSubtitle').textContent = titles[step].subtitle;

            // Hide login link on success
            document.getElementById('loginLink').style.display = step === 8 ? 'none' : 'block';

            currentStep = step;
            clearMessage();
        }

        // ==================== STEP 1: NAME & EMAIL ====================
        function submitStep1() {
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const email = document.getElementById('email').value.trim();

            if (!firstName || !lastName) {
                showMessage('Please enter your first and last name', 'error');
                return;
            }

            if (!email || !isValidEmail(email)) {
                showMessage('Please enter a valid email address', 'error');
                return;
            }

            userData.firstName = firstName;
            userData.lastName = lastName;
            userData.email = email;

            // Send verification code (simulated)
            sendEmailVerificationCode();

            document.getElementById('emailDisplay').textContent = email;
            goToStep(2);
        }

        function sendEmailVerificationCode() {
            // Generate 6-digit code
            emailCode = Math.floor(100000 + Math.random() * 900000).toString();
            console.log('Email verification code:', emailCode); // For demo

            // In production: Call API to send email
            // POST to GHL or custom backend
        }

        function resendEmailCode() {
            sendEmailVerificationCode();
            showMessage('New code sent to your email', 'success');
        }

        // ==================== STEP 2: VERIFY EMAIL ====================
        function verifyEmailCode() {
            const inputs = document.querySelectorAll('#emailCodeInputs .code-input');
            const code = Array.from(inputs).map(i => i.value).join('');

            if (code.length !== 6) {
                showMessage('Please enter the complete 6-digit code', 'error');
                return;
            }

            // Verify code (in production, verify with backend)
            if (code === emailCode || code === '123456') { // Allow 123456 for demo
                userData.emailVerified = true;
                goToStep(3);
            } else {
                showMessage('Invalid code. Please try again.', 'error');
                shakeInputs('#emailCodeInputs');
            }
        }

        // ==================== STEP 3: PHONE NUMBER ====================
        function submitPhone() {
            let phone = document.getElementById('phone').value.trim();

            // Clean phone number
            phone = phone.replace(/\D/g, '');

            if (phone.length < 10) {
                showMessage('Please enter a valid phone number', 'error');
                return;
            }

            userData.phone = phone;

            // Send phone verification code
            sendPhoneVerificationCode();

            // Format for display
            const formatted = formatPhone(phone);
            document.getElementById('phoneDisplay').textContent = formatted;
            goToStep(4);
        }

        function sendPhoneVerificationCode() {
            // Generate 6-digit code
            phoneCode = Math.floor(100000 + Math.random() * 900000).toString();
            console.log('Phone verification code:', phoneCode); // For demo

            // In production: Call GHL SMS API
            // POST to /sms endpoint
        }

        function resendPhoneCode() {
            sendPhoneVerificationCode();
            showMessage('New code sent to your phone', 'success');
        }

        // ==================== STEP 4: VERIFY PHONE ====================
        async function verifyPhoneCode() {
            const inputs = document.querySelectorAll('#phoneCodeInputs .code-input');
            const code = Array.from(inputs).map(i => i.value).join('');

            if (code.length !== 6) {
                showMessage('Please enter the complete 6-digit code', 'error');
                return;
            }

            // Verify code
            if (code === phoneCode || code === '123456') { // Allow 123456 for demo
                userData.phoneVerified = true;

                // Check if paid subscriber - if so, skip qualification steps
                const subStatus = await checkPaidSubscription(userData.email);
                isFreeTrial = !subStatus.isPaid;

                if (isFreeTrial) {
                    // Show qualification dots and go to step 5
                    document.querySelectorAll('.step-dot[data-step="5"], .step-dot[data-step="6"], .step-dot[data-step="7"]').forEach(d => d.classList.remove('hidden'));
                    goToStep(5);
                } else {
                    // Paid user - skip to success
                    localStorage.setItem('cb_plan', subStatus.plan);
                    createAccount();
                }
            } else {
                showMessage('Invalid code. Please try again.', 'error');
                shakeInputs('#phoneCodeInputs');
            }
        }

        // ==================== QUALIFICATION OPTION HANDLERS ====================
        function toggleQualOption(element) {
            element.classList.toggle('selected');
            const checkbox = element.querySelector('input[type="checkbox"]');
            if (checkbox) checkbox.checked = element.classList.contains('selected');
        }

        function selectQualOption(element, groupId) {
            // Deselect all in group
            document.querySelectorAll(`#${groupId} .qual-option`).forEach(opt => {
                opt.classList.remove('selected');
                const radio = opt.querySelector('input[type="radio"]');
                if (radio) radio.checked = false;
            });
            // Select this one
            element.classList.add('selected');
            const radio = element.querySelector('input[type="radio"]');
            if (radio) radio.checked = true;
        }

        // ==================== STEP 5: CONTENT GOALS ====================
        function submitContentGoals() {
            // Gather selected content types
            const selectedTypes = [];
            document.querySelectorAll('#contentTypeOptions .qual-option.selected input').forEach(input => {
                selectedTypes.push(input.value);
            });

            if (selectedTypes.length === 0) {
                showMessage('Please select at least one content type', 'error');
                return;
            }

            userData.contentTypes = selectedTypes;
            userData.shortFormGoal = parseInt(document.getElementById('shortFormGoal').value) || 0;
            userData.longFormGoal = parseInt(document.getElementById('longFormGoal').value) || 0;

            goToStep(6);
        }

        // ==================== STEP 6: CURRENT SETUP ====================
        function submitCurrentSetup() {
            const selectedSetup = [];
            document.querySelectorAll('#currentSetupOptions .qual-option.selected input').forEach(input => {
                selectedSetup.push(input.value);
            });

            if (selectedSetup.length === 0) {
                showMessage('Please select at least one option', 'error');
                return;
            }

            userData.currentSetup = selectedSetup;
            goToStep(7);
        }

        // ==================== STEP 7: TIMEFRAME ====================
        function submitTimeframe() {
            const selectedTimeframe = document.querySelector('#timeframeOptions .qual-option.selected input');

            if (!selectedTimeframe) {
                showMessage('Please select when you want to get started', 'error');
                return;
            }

            userData.timeframe = selectedTimeframe.value;

            // Calculate lead score
            calculateLeadScore();

            // Create account
            createAccount();
        }

        // ==================== CREATE ACCOUNT ====================
        function createAccount() {
            const btn = document.getElementById('verifyPhoneBtn') || document.querySelector('#step7 .btn-primary');
            if (btn) {
                btn.innerHTML = '<span class="spinner"></span>Creating account...';
                btn.disabled = true;
            }

            setTimeout(() => {
                localStorage.setItem('cb_email', userData.email);
                localStorage.setItem('cb_name', `${userData.firstName} ${userData.lastName}`);
                localStorage.setItem('cb_first_name', userData.firstName);
                localStorage.setItem('cb_phone', userData.phone);
                localStorage.setItem('cb_role', 'client');
                localStorage.setItem('cb_email_verified', 'true');
                localStorage.setItem('cb_phone_verified', 'true');

                if (isFreeTrial) {
                    localStorage.setItem('cb_is_free_trial', 'true');
                    localStorage.setItem('cb_lead_score', userData.leadScore.toString());
                    localStorage.setItem('cb_content_types', JSON.stringify(userData.contentTypes));
                    localStorage.setItem('cb_current_setup', JSON.stringify(userData.currentSetup));
                    localStorage.setItem('cb_timeframe', userData.timeframe);
                    localStorage.setItem('cb_plan', 'free_trial');
                }

                console.log('Account created:', userData);
                goToStep(8);
            }, 1500);
        }

        function goToPortal() {
            window.location.href = 'portal.html';
        }

        // ==================== HELPERS ====================
        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function formatPhone(phone) {
            if (phone.length === 10) {
                return `(${phone.slice(0,3)}) ${phone.slice(3,6)}-${phone.slice(6)}`;
            }
            return phone;
        }

        function showMessage(text, type) {
            const msg = document.getElementById('messageArea');
            msg.textContent = text;
            msg.className = `message ${type}`;
        }

        function clearMessage() {
            const msg = document.getElementById('messageArea');
            msg.className = 'message';
            msg.textContent = '';
        }

        function shakeInputs(selector) {
            const container = document.querySelector(selector);
            container.style.animation = 'shake 0.5s ease';
            setTimeout(() => container.style.animation = '', 500);
        }

        // ==================== CODE INPUT HANDLERS ====================
        function initCodeInputs() {
            document.querySelectorAll('.code-inputs').forEach(container => {
                const inputs = container.querySelectorAll('.code-input');

                inputs.forEach((input, index) => {
                    input.addEventListener('input', (e) => {
                        const value = e.target.value;

                        // Only allow numbers
                        e.target.value = value.replace(/\D/g, '').slice(0, 1);

                        if (e.target.value) {
                            e.target.classList.add('filled');
                            // Move to next input
                            if (index < inputs.length - 1) {
                                inputs[index + 1].focus();
                            }
                        } else {
                            e.target.classList.remove('filled');
                        }
                    });

                    input.addEventListener('keydown', (e) => {
                        if (e.key === 'Backspace' && !e.target.value && index > 0) {
                            inputs[index - 1].focus();
                        }
                    });

                    // Handle paste
                    input.addEventListener('paste', (e) => {
                        e.preventDefault();
                        const paste = (e.clipboardData || window.clipboardData).getData('text');
                        const digits = paste.replace(/\D/g, '').split('').slice(0, 6);

                        digits.forEach((digit, i) => {
                            if (inputs[i]) {
                                inputs[i].value = digit;
                                inputs[i].classList.add('filled');
                            }
                        });

                        if (digits.length === 6) {
                            inputs[5].focus();
                        }
                    });
                });
            });
        }

        // ==================== PHONE INPUT FORMATTING ====================
        document.getElementById('phone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 10) value = value.slice(0, 10);

            if (value.length >= 6) {
                e.target.value = `(${value.slice(0,3)}) ${value.slice(3,6)}-${value.slice(6)}`;
            } else if (value.length >= 3) {
                e.target.value = `(${value.slice(0,3)}) ${value.slice(3)}`;
            } else {
                e.target.value = value;
            }
        });

        // ==================== INIT ====================
        document.addEventListener('DOMContentLoaded', initCodeInputs);

        // Add shake animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-8px); }
                75% { transform: translateX(8px); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
